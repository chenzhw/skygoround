[已解决]
今天看ABS中遇到了这个问题,怎么也看不懂

代码:
  1 (cd /source/directory && tar cf - . ) | (cd /dest/directory && tar xpvf -)
  2 # 从一个目录移动整个目录树到另一个目录从解释中没看明白,大家怎么认为?


代码:
  1 (cd /source/directory && tar cf - . ) | (cd /dest/directory && tar xpvf -)
  2 # 从一个目录移动整个目录树到另一个目录
  3 # [感谢Alan Cox <a.cox@swansea.ac.uk>, 走出了部分修改]
  4 
  5 # 1) cd /source/directory    源目录
  6 # 2) &&                     "与列表": 如果'cd'命令成功了, 那么就执行下边的命令. 
  7 # 3) tar cf - .              'c'创建一个新文档, 'f'后边跟'-'指定目标文件作为stdout
  8 #                            '-'后边的'f'(file)选项, 指明作为stdout的目标文件. 
  9 #                            并且在当前目录('.')执行.
 10 # 4) |                       管道...
 11 # 5) ( ... )                 一个子shell
 12 # 6) cd /dest/directory      改变当前目录到目标目录.
 13 # 7) &&                     "与列表", 同上
 14 # 8) tar xpvf -              'x'解档, 'p'保证所有权和文件属性,
 15 #                            'v'发完整消息到stdout,
 16 #                            'f'后边跟'-',从stdin读取数据. 
 17 #
 18 #                            注意:'x' 是一个命令, 'p', 'v', 'f' 是选项.
 &&你应当懂吧。tar中的 - 表示stdin或者stdout，当需要将stdin或者stdout作为一个文件名参数来使用时可以使用 - 。
tar cf - . 表示将当前目录也就是 ./ 下的文件都打包生成一个文件，此文件为 - ，意即将生成的包文件的二进制内容以字符方式显示到stdout上。
tar xpvf - 表示将从stdin读入的内容全部解压到当前目录下。

这下你应当明白了吧！

du -sh 显示目录大小

   下面以home目录为例简要说明一下移动的过程。例子中我们将home目录移动到/dev/hda8分区上。
1、挂载一个分区到某个目录
mount /dev/hda8 /mnt/tmphome
2、拷贝文件
cd /home
tar cf - . | (cd /mnt/tmphome/; tar xpvf -)
3、清空/home目录
rm -rf /home
mkdir /home
4、编辑 /etc/fstab 让计算机启动时自动挂上分区
/dev/hda8  /home  reiserfs acl,user_xattr  1 1
5、卸载刚才挂上的那个分区，重新将它挂载到home目录
umount /mnt/tmphome
mount /dev/hda8 /home
6、完成

    由此继续深研，你会发现根目录"/"只不过是Linux内核创建的一个挂载点，系统首先将一个硬盘分区挂载成根分区，然后将其它设备挂载到根分区的某个目录里。
    原来LInux就是一个被这样挂起来的系统。







